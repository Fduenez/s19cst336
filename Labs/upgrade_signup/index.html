<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>AJAX: Sign Up Page</title>
  <link href="css/styles.css" rel="stylesheet" type="text/css" />
</head>

<body id="dummybodyid">
  <h1> Sign Up Form </h1>

  <form>
    <fieldset>
      <legend>Sign Up</legend>
      <div><label>First Name:</label><input type="text"></div>
      <div><label>Last Name:</label><input type="text"></div>
      <div><label>Email:</label><input type="text"></div>
      <div><label>Phone Number:</label><input type="text"></div>
      <div><label>Zip Code:</label><input type="text" id = "zip"><span class = "failed"></span></div>
      <div><label id="city">City:</label></div>
      <div><label id="latitude">Latitude:</label></div>
      <div><label id="longitude">Longitude:</label></div>
      <div><label>State:</label><input type="text" id = "state"><span class = "stateFailed"></span></div>
      <div><label>Select a County:</label><select id="county"></select></div>
      <div><label>Desired Username:</label><input type="text" id="username"><p>hi</p></div>
      <div><label>Password:</label><input type="password" id="password1"></div>
      <div><label>Type Password Again:</label><input type="password" id="password2"><span id="retype"></span></div>
      <div><button type = button id = "button">submit</button></div>
    </fieldset>
  </form>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script>
    $("#button").on("click",function(){
      $.ajax({
        type: "POST",
        url: "api.php",
        dataType: "text",
        data: {
          "username":$("#username").val(),
          "password": [$("#password1").val(), $("#password2").val()],
          
        },
        success: function(data) {
          console.log(data);
          console.log("hi");
          console.log(data['message']);
          if(data["message"] === "used") 
          {
            console.log("hey");
            $("p").html("Username is used")
          }
          // if (data["message"] === "Username is used") 
          // {
          //   $("#valid").html("Username is used")
          // }
          // if (data["message"] === "Username is used") 
          // {
          // ("#valid").html("Username is used");
          // }
        },
        error: function(err) {
          console.log("Houston, we have a problem!")
          console.log(arguments);
        },
        complete: function(data, status) {
          
        
        }
      })
      
      
      
    });
  </script>
</body>

</html>

<!--https://fduenez-s19cst336.herokuapp.com/Labs/upgrade_signup/index.html-->
<!--https://s19cst336-frankduenez.c9users.io/s19cst336/Labs/upgrade_signup/index.html-->
<!--https://github.com/Fduenez/s19cst336/tree/master/Labs/upgrade_signup-->